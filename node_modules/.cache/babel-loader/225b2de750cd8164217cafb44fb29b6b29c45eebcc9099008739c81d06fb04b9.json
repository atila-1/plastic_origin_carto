{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport { useFetchData } from './FetchData';\nconst TrashLayer = props => {\n  _s();\n  const [zoom, setZoom] = useState(5);\n  const [data, loading] = useFetchData();\n  useEffect(() => {\n    if (!props.map) return;\n    props.map.on('move', () => {\n      setZoom(props.map.getZoom().toFixed(2));\n    });\n  }, [props.map]);\n  useEffect(() => {\n    if (loading || !data || !props.map) return;\n    if (!props.map.getSource('data')) {\n      props.map.addSource(\"data\", {\n        \"type\": \"geojson\",\n        \"data\": data\n      });\n    } else {\n      props.map.getSource('data').setData(data);\n    }\n    if (!props.map.getLayer('data')) {\n      props.map.addLayer({\n        \"id\": \"data\",\n        \"type\": \"heatmap\",\n        \"source\": \"data\",\n        \"layout\": {}\n      });\n    }\n\n    /*     if (props.map.getLayer('data')) {\r\n          if (zoom > 15) {\r\n            props.map.setLayoutProperty('data', \"type\", \"circle\");\r\n          } else {\r\n            props.map.setLayoutProperty('data', \"type\", \"heatmap\");\r\n          }\r\n        } */\n  }, [loading, data, zoom, props.map]);\n\n  // console.log(zoom)\n\n  return null;\n};\n_s(TrashLayer, \"QfUniDJJzs+PTPV823xCK0i9gig=\", false, function () {\n  return [useFetchData];\n});\n_c = TrashLayer;\nexport default TrashLayer;\nvar _c;\n$RefreshReg$(_c, \"TrashLayer\");","map":{"version":3,"names":["useState","useEffect","mapboxgl","useFetchData","TrashLayer","props","zoom","setZoom","data","loading","map","on","getZoom","toFixed","getSource","addSource","setData","getLayer","addLayer"],"sources":["C:/Users/quent/Documents/Surfrider/new_map_from_scratch/src/components/TrashLayer.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport {useFetchData} from './FetchData';\r\n\r\nconst TrashLayer = props => {\r\n  const [zoom, setZoom] = useState(5);\r\n  const [data, loading] = useFetchData();\r\n\r\n  useEffect(() => {\r\n    if (!props.map) return;\r\n    props.map.on('move', () => {\r\n      setZoom(props.map.getZoom().toFixed(2));\r\n    });\r\n  }, [props.map]);\r\n\r\n  useEffect(() => {\r\n    if (loading || !data || !props.map) return ;\r\n  \r\n    if(!props.map.getSource('data')){\r\n      props.map.addSource(\"data\", {\r\n        \"type\": \"geojson\",\r\n        \"data\": data\r\n      });\r\n    } else {\r\n      props.map.getSource('data').setData(data);\r\n    }\r\n  \r\n    if (!props.map.getLayer('data')) {\r\n      props.map.addLayer({\r\n        \"id\": \"data\",\r\n        \"type\": \"heatmap\",\r\n        \"source\": \"data\",\r\n        \"layout\": {\r\n        }\r\n      });\r\n    }\r\n  \r\n/*     if (props.map.getLayer('data')) {\r\n      if (zoom > 15) {\r\n        props.map.setLayoutProperty('data', \"type\", \"circle\");\r\n      } else {\r\n        props.map.setLayoutProperty('data', \"type\", \"heatmap\");\r\n      }\r\n    } */\r\n  }, [loading, data, zoom, props.map]);\r\n  \r\n\r\n  // console.log(zoom)\r\n\r\n  return null;\r\n};\r\n\r\nexport default TrashLayer;\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,QAAQ,MAAM,WAAW;AAChC,SAAQC,YAAY,QAAO,aAAa;AAExC,MAAMC,UAAU,GAAGC,KAAK,IAAI;EAAA;EAC1B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGP,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,GAAGN,YAAY,EAAE;EAEtCF,SAAS,CAAC,MAAM;IACd,IAAI,CAACI,KAAK,CAACK,GAAG,EAAE;IAChBL,KAAK,CAACK,GAAG,CAACC,EAAE,CAAC,MAAM,EAAE,MAAM;MACzBJ,OAAO,CAACF,KAAK,CAACK,GAAG,CAACE,OAAO,EAAE,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC;IACzC,CAAC,CAAC;EACJ,CAAC,EAAE,CAACR,KAAK,CAACK,GAAG,CAAC,CAAC;EAEfT,SAAS,CAAC,MAAM;IACd,IAAIQ,OAAO,IAAI,CAACD,IAAI,IAAI,CAACH,KAAK,CAACK,GAAG,EAAE;IAEpC,IAAG,CAACL,KAAK,CAACK,GAAG,CAACI,SAAS,CAAC,MAAM,CAAC,EAAC;MAC9BT,KAAK,CAACK,GAAG,CAACK,SAAS,CAAC,MAAM,EAAE;QAC1B,MAAM,EAAE,SAAS;QACjB,MAAM,EAAEP;MACV,CAAC,CAAC;IACJ,CAAC,MAAM;MACLH,KAAK,CAACK,GAAG,CAACI,SAAS,CAAC,MAAM,CAAC,CAACE,OAAO,CAACR,IAAI,CAAC;IAC3C;IAEA,IAAI,CAACH,KAAK,CAACK,GAAG,CAACO,QAAQ,CAAC,MAAM,CAAC,EAAE;MAC/BZ,KAAK,CAACK,GAAG,CAACQ,QAAQ,CAAC;QACjB,IAAI,EAAE,MAAM;QACZ,MAAM,EAAE,SAAS;QACjB,QAAQ,EAAE,MAAM;QAChB,QAAQ,EAAE,CACV;MACF,CAAC,CAAC;IACJ;;IAEJ;AACA;AACA;AACA;AACA;AACA;AACA;EACE,CAAC,EAAE,CAACT,OAAO,EAAED,IAAI,EAAEF,IAAI,EAAED,KAAK,CAACK,GAAG,CAAC,CAAC;;EAGpC;;EAEA,OAAO,IAAI;AACb,CAAC;AAAC,GA9CIN,UAAU;EAAA,QAEUD,YAAY;AAAA;AAAA,KAFhCC,UAAU;AAgDhB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}